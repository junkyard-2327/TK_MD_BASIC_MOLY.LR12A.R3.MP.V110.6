/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE.
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*****************************************************************************
 *
 * Filename:
 * ---------
 *
 *
 * Project:
 * --------
 *   MAUI
 *
 * Description:
 * ------------
 *
 *
 * Author:
 * -------
 *
 *
 *============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *============================================================================
 ****************************************************************************/

#include "kal_general_types.h"
#include "sbp_public_utility.h"
#include "kal_public_api.h"
#include "ps_em_enum.h"
#include "nvram_interface.h"
#include "nvram_data_items.h"
#include "sbp_nvram_def.h"
#include "nvram_enums.h"
#include "nvram_editor_data_item.h"
#include "sim_ps_api.h"
#include "custom_imc_config.h"
#include "sbp_trc.h"
#include "kal_trace.h"

extern nvram_ef_sbp_modem_config_struct sbp_config;
extern nvram_ef_sbp_modem_data_config_struct sbp_data_config;

const static sbp_attribute_enum sbp_feature_attr_table[]=
{
#define SBP_FEATURE_DEF_BEGIN(x)
#define SBP_FEATURE_DEF(FEATURE, ATTR, DESC, DESC_V0,DESC_V1, DEFAULT_VAL) ATTR,
#define SBP_FEATURE_DEF_END(x)

    #include "sbp_feature.def"
#undef SBP_FEATURE_DEF_BEGIN
#undef SBP_FEATURE_DEF
#undef SBP_FEATURE_DEF_END

};

const static sbp_attribute_enum sbp_data_attr_table[]=
{
#define SBP_DATA_DEF(ID, FEATURE, ATTR, DESC) ATTR,
#define SBP_DATA_DEF_BIT(ID, FEATURE, ATTR) ATTR,
    #include "sbp_data.def"
#undef SBP_DATA_DEF
#undef SBP_DATA_DEF_BIT
};

/*****************************************************************************
* FUNCTION
*   sbp_md_feature_overwrite()
*
* DESCRIPTION
*   This function is used to overwrite the configuration for GCF or other test modes
*
* PARAMETERS
*   feature [IN]    modem feature
*   enabled [IN]   feature is turned on or not
*
* RETURNS
*   KAL_TRUE    : if this feature is turned on
*   KAL_FALSE   : if this feature is turned off
*****************************************************************************/
kal_bool sbp_md_feature_overwrite(sbp_md_feature_enum feature, kal_bool enabled)
{
    kal_bool result = enabled;

    switch (feature)
    {

        case SBP_UMTS_CB_OFF:
            {
                // This is an example of overwriting the configuration for FTA
                // if(query_ps_conf_test_mode() == PS_CONF_TEST_FTA)
                //     result = KAL_TRUE;
            }
            break;

        case SBP_IS_OP07:
        case SBP_FINGERPRINT:
            {
#ifndef __L1_STANDALONE__
                if(query_ps_conf_test_mode() == PS_CONF_TEST_FTA)
                     result = KAL_FALSE;
#endif
            }
            break;

        default:
            break;
    }

    return result;
}

/*****************************************************************************
* FUNCTION
*   sbp_query_md_feature_by_nvram()
*
* DESCRIPTION
*   This function is used to query modem configuration
*
* PARAMETERS
*   feature [IN]    modem feature
*   sbp_feature_ptr [IN]    modem feature in NVRAM
*
* RETURNS
*   KAL_TRUE    : if this feature is turned on
*   KAL_FALSE   : if this feature is turned off
*****************************************************************************/
static kal_bool sbp_query_md_feature_by_nvram(sbp_md_feature_enum feature, nvram_ef_sbp_modem_config_struct *sbp_feature_ptr)
{
    kal_uint8 *bitmask_ptr;
    kal_uint32 byte_offset;
    kal_uint8 bit_offset;
    kal_bool result;

    if (feature >= SBP_MAX_MD_FEATURE)
    {
        ASSERT(0);
    }
    byte_offset = feature / 8;
    bit_offset = feature % 8;
    bitmask_ptr = &(sbp_feature_ptr->modem_sbp_config[byte_offset]);

    result = (((*bitmask_ptr) & (0x01 << bit_offset)) != 0)? KAL_TRUE : KAL_FALSE;

    return result;
}

/*****************************************************************************
* FUNCTION
*   sbp_md_feature_data_overwrite()
*
* DESCRIPTION
*   This function is used to overwrite the configuration for GCF or other test modes
*
* PARAMETERS
*   feature [IN]    modem feature
*   value [IN]       the value of the feature
*
* RETURNS
*   the overwrited value for the feature
*****************************************************************************/
kal_uint8 sbp_md_feature_data_overwrite(sbp_md_feature_data_enum feature, kal_uint8 value)
{
    kal_uint8 result = value;

    switch (feature)
    {
        case SBP_DATA_VAMOS:
            {
                // This is an example of overwriting the configuration for FTA
                // if(query_ps_conf_test_mode() == PS_CONF_TEST_FTA)
                //     result = 3;
            }
            break;

        default:
            break;
    }

    return result;
}
 
/*****************************************************************************
* FUNCTION
*   sbp_query_md_feature_data_by_nvram()
*
* DESCRIPTION
*   This function is used to query modem configuration data
*
* PARAMETERS
*   feature [IN]    modem feature
*   sbp_data_ptr [IN]    modem data in NVRAM
*
* RETURNS
*   the unsigned byte value for the feature
*****************************************************************************/
static kal_uint8 sbp_query_md_feature_data_by_nvram(sbp_md_feature_data_enum feature, nvram_ef_sbp_modem_data_config_struct *sbp_data_ptr)
{
    kal_uint8 result;

    if (feature >= SBP_DATA_MAX_MD_FEATURE)
    {
        ASSERT(0);
    }

    result = sbp_data_ptr->modem_sbp_data_config[feature];

    //For GCF or other test modes, you may overwrite the result.
    result = sbp_md_feature_data_overwrite(feature, result);

    return result;
}

/*****************************************************************************
* FUNCTION
*   sbp_set_custom_config_from_nv
*
* DESCRIPTION
*   This function applies sbp feature/data custom config by nv item
*   NVRAM_EF_SBP_CUSTOM_MODEM_CONFIG_LID according to type and sbp_id in the nv
*   
*
* PARAMETERS
*   ps_id       [IN]    protocol ID
*   sim_sbp_id  [IN]    sim_sbp_id
* RETURNS
*   void
*
*****************************************************************************/
void sbp_set_custom_config_from_nv(protocol_id_enum ps_id, kal_uint32 sim_sbp_id, sbp_reconfig_custom_param_struct *param_ptr)
{
    kal_bool result;
    nvram_ef_sbp_custom_modem_config_struct   *sbp_custom_modem_config_nv_ptr;
    sbp_custom_config_struct                  *sbp_custom_config_nv_ptr;
    kal_uint32 i = 0;

    sbp_custom_modem_config_nv_ptr = (nvram_ef_sbp_custom_modem_config_struct *) get_ctrl_buffer(
                                      sizeof(nvram_ef_sbp_custom_modem_config_struct));

    result = nvram_external_read_data(NVRAM_EF_SBP_CUSTOM_MODEM_CONFIG_LID, 
                                      1,
                                      (kal_uint8*)sbp_custom_modem_config_nv_ptr,
                                      NVRAM_EF_SBP_CUSTOM_MODEM_CONFIG_SIZE);

    if (result == KAL_TRUE)
    {
        for (i = 0; i < SBP_MAX_CUSTOM_CONFIG; i++)
        {
            sbp_custom_config_nv_ptr = &sbp_custom_modem_config_nv_ptr->sbp_custom_config[i];
            if (sbp_custom_config_nv_ptr->sbp_cust_cfg_type == SBP_CUST_CFG_TYPE_NONE)
            {
                // No config found
                continue;
            }
            else if (sbp_custom_config_nv_ptr->sbp_cust_cfg_type == SBP_CUST_CFG_TYPE_FEATURE)
            {
                if (sbp_custom_config_nv_ptr->sbp_id == sim_sbp_id)
                {
                    // Skip if feature not support DSBP and we are in DSBP
                    if (param_ptr->is_in_dynamic_sbp == KAL_TRUE &&
                       (sbp_feature_attr_table[sbp_custom_config_nv_ptr->sbp_cust_cfg_feature] & SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP) 
                        == SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP )
                    {
                        kal_brief_trace(TRACE_INFO, INFO_SBP_FEAT_NOT_DSBP, sbp_custom_config_nv_ptr->sbp_cust_cfg_feature, ps_id);
                        continue;
                    }
                    
                    kal_brief_trace(TRACE_INFO, INFO_SBP_UPDATE_FEAT,
                                    sbp_custom_config_nv_ptr->sbp_cust_cfg_feature,
                                    sbp_custom_config_nv_ptr->sbp_cust_cfg_feature_val, ps_id);

                    sbp_set_md_feature_by_ps(
                        (sbp_md_feature_enum)sbp_custom_config_nv_ptr->sbp_cust_cfg_feature,
                        (kal_bool)sbp_custom_config_nv_ptr->sbp_cust_cfg_feature_val,
                        ps_id);
                }
            }
            else if (sbp_custom_config_nv_ptr->sbp_cust_cfg_type == SBP_CUST_CFG_TYPE_DATA)
            {
                if(sbp_custom_config_nv_ptr->sbp_id == sim_sbp_id)
                {
                    // Skip if feature not support DSBP and we are in DSBP
                    if (param_ptr->is_in_dynamic_sbp == KAL_TRUE &&
                       (sbp_data_attr_table[sbp_custom_config_nv_ptr->sbp_cust_cfg_feature] & SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP) 
                        == SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP )
                    {
                        kal_brief_trace(TRACE_INFO, INFO_SBP_DATA_NOT_DSBP, sbp_custom_config_nv_ptr->sbp_cust_cfg_feature, ps_id);
                        continue;
                    }

                    kal_brief_trace(TRACE_INFO, INFO_SBP_UPDATE_DATA,
                                    sbp_custom_config_nv_ptr->sbp_cust_cfg_feature,
                                    sbp_custom_config_nv_ptr->sbp_cust_cfg_feature_val, ps_id);

                    sbp_set_md_feature_data_by_ps(
                        (sbp_md_feature_data_enum)sbp_custom_config_nv_ptr->sbp_cust_cfg_feature,
                        (kal_uint8)sbp_custom_config_nv_ptr->sbp_cust_cfg_feature_val,
                        ps_id);
                }
            }
        }
    }
    else
    {
        kal_brief_trace(TRACE_INFO, INFO_SBP_UPDATE_NVRAM_ACCESS_FAIL);
    }

    // Free allocated buffer
    if (sbp_custom_modem_config_nv_ptr != NULL)
    {
        free_ctrl_buffer(sbp_custom_modem_config_nv_ptr);
        sbp_custom_modem_config_nv_ptr = NULL;
    }
}

 /*****************************************************************************
  * FUNCTION
  *  nvram_custom_config_sbp
  * DESCRIPTION
  * Set SBP features and data according to SBP ID.
  * PARAMETERS
  *  param_ptr  [IN]
  * RETURNS
  *   KAL_TRUE	  : Set SBP ID successfully
  *   KAL_FALSE   : Error happens when setting SBP ID
  *****************************************************************************/
kal_bool nvram_custom_config_sbp(sbp_reconfig_custom_param_struct *param_ptr)
{
    nvram_ef_sbp_modem_config_struct sbp_feature_buf;
    nvram_ef_sbp_modem_data_config_struct sbp_data_buf;
    kal_uint32 sbp_id = param_ptr->sbp_id;

    kal_brief_trace(TRACE_INFO, INFO_SBP_DSBP_RECONFIG_PARAM, param_ptr->ps_id, param_ptr->sbp_id, param_ptr->mcc, param_ptr->mnc);

    /*
        New procedure for SBP Feature and Feature Data NVRAM operatation:
        0. (Note) no longer use default NV value and remove old test mode 1
        1. Read current feature/data NV value
        2. Apply hard code change according to sbp_id (if not test mode 2)
        3. Apply custom config nv changes
        4. Write back to context (no longer write back to NV)
    */

    /* Read current settings in NVRAM */
    nvram_external_read_data(NVRAM_EF_SBP_MODEM_CONFIG_LID,
                 1,
                 (kal_uint8*)&sbp_feature_buf,
                 NVRAM_EF_SBP_MODEM_CONFIG_SIZE);

    /* Read current settings in NVRAM */
    nvram_external_read_data(NVRAM_EF_SBP_MODEM_DATA_CONFIG_LID,
                 1,
                 (kal_uint8*)&sbp_data_buf,
                 NVRAM_EF_SBP_MODEM_DATA_CONFIG_SIZE);

    if (SBP_TEST_MODE_2 == sbp_get_test_mode())
    {
        // don't reset SBP features according to the SBP ID
    }
    else if (sbp_query_id() == 0)// CCCI SBP ID OM
    {
        sbp_set_md_feature(SBP_DISABLE_DISPLAY_ROAMING_HPLMN_IN_EPLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_query_id() != 0)// MTK internal optimization, turn off for OP load
    {
        sbp_set_md_feature(SBP_REG_HISTORY_FOR_PLMN_SELECTION, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }

    if (SBP_TEST_MODE_2 == sbp_get_test_mode())
    {
        // don't reset SBP features according to the SBP ID
    }
    else if(sbp_id == 0) //OM
    {
        /* enable MIP for e.g. lab MIP cases */
        sbp_set_md_feature(SBP_STATUS_MIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_CT_AUTO_REG_WHEN_MCC_CHANGED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SESSION_NEGO_OPTM_POWERON, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_DISPLAY_ROAMING_HPLMN_IN_EPLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    #ifdef MTK_DEV_SLT
        sbp_set_md_feature(SBP_STATUS_CHINATELECOM_CARDLOCK, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    #endif
        sbp_set_md_feature(SBP_ENABLE_D4U5_FOR_TESTSIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
#ifdef MT6763
        sbp_set_md_feature(SBP_ENABLE256QAM_UNDER_TEST_SIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
#endif
    }
    else if (sbp_id == 1) //for CMCC
    {
        sbp_set_md_feature(SBP_OP01_TEST_MODE_CONSIDER_SIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_OP01_AT_SUPPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PREFER_SEARCH_3G, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PREFER_SEARCH_4G, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_OP01_COMMON_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RESUME_GPRS_AFTER_LU_ABNORMAL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_WRAP_AROUND_INT_FAIL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_IGNORE_MT_CS_WHEN_IMS_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CMHK_CUSTOMIZE_EPLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RAC_CHANGE_VDP_WHEN_IMS_ONOFF, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CMCC_VOLTE_FT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PLMN_SEARCH_ABORT_SUPPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CUSTOM_FPLMN_USED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);

        sbp_set_md_feature(SBP_CMCC_SRVCC_CDRX_EHEN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SRVCC_STOP_UAS_MEAS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SRVCC_DRX_INC_GAP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SRVCC_STOP_EAS_MEAS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_REL_12_EPLMN_LIST_HANDLING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_HSR_ENHANCE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_EPLMN_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_T_PLUS_W, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_TIN_DELETE_USE_IMSI, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_D4U5_FOR_TESTSIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
#ifdef MT6763
        sbp_set_md_feature(SBP_ENABLE256QAM_UNDER_TEST_SIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
#endif
		sbp_set_md_feature(SBP_EMM_OCCUPY_CS_WHEN_DRB_EST_DURING_TAU_WITH_NO_ACTIVE_FLAG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 2) // for CU
    {
    }
    else if (sbp_id == 3) //for Orange
    {
        sbp_set_md_feature(SBP_HPPLMN_REGARDLESS_ANY_MCC, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_RPLMN_FROM_GLOCI, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ORANGE_H_PLUS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    #ifdef __LTE_RAT__
        sbp_set_md_feature(SBP_OMIT_ESM_INFORMATION_FLAG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    #endif
        sbp_set_md_feature(SBP_ORANGE_HPPLMN_DEFAULT_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PREFER_SEARCH_4G, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PREFER_SEARCH_3G, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_MM_NOT_STAY_ON_FBLA_FOR_REG_PROV, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_SEARCH_NOT_PREFERRED_AVAILABLE_PLMN, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 5) //For DTAG
    {
    	sbp_set_md_feature(SBP_CELL_FACH_LTE_APBCR, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_MS_SUPPORT_OF_NETWORK_REQUESTED_BEARER_CONTROL_INDICATOR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 6) //for Vodafone
    {
        sbp_set_md_feature(SBP_MM_TRY_ABNORMAL_LAI_ONCE_MORE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_USE_SM_QOS_SUBSCRIBED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_RPLMN_FROM_HISTORY_TABLE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature_data(SBP_VDM_ADS_SEL_ALGO_MASK_WFCP_VDP_PRIORITY_GROUP2, 255, (nvram_ef_sbp_modem_data_config_struct*) &sbp_data_buf);
        sbp_set_md_feature(SBP_FGI_REPORTING_NO_SRVCC_CHECK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*) &sbp_feature_buf);
    }
    else if (sbp_id == 7 || sbp_id == 145 || sbp_id == 196) //for AT&T and Cricket and FirstNet
    {
        /* Cricket is sub branding of AT&T and has almost all features common to AT&T.
            Please check if your feature is common to both the operators,
            or specific to AT&T or Cricket and set/reset accordingly
            if any question for your feature, please find ATT/Cricket spec PM to confirm*/

        /* Features common for AT&T and Cricket both */
        sbp_set_md_feature(SBP_USIM_CSP_SUPPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENS_RAT_BALANCING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ATNT_HPPLMN_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_AUTO_RETURN_PRE_RPLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_RPLMN_FROM_GLOCI, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_AT_ME_IDENTIFICATION_WITHOUT_HEADER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_NO_EVDL_IN_SESSION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_IMEI_LOCK_SUPPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STAR_SHORT_STRING_AS_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CUSTOMIZED_IDLE_STRING_AS_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_DISABLE_RETRY_ABNORMAL_LAI, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_NOT_TRY_ANOTHER_RAT_FOR_LU_ABNORMAL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_REISSUE_REFRESH_AFTER_CALL_END, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ALLOW_SIM_REFRESH_RESET_WHEN_IN_CALL, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_IS_ATT_CONN_REJ, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_IS_OP07, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CONSERVATIVE_IPV4V6_FALLBACK_STRATEGY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_REPORT_CSG_LIST_IN_SIGNAL_DECREASING_ORDER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_IS_ATT_CONN_REJ, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CLEAR_LOCI_WHEN_UICC_RESET, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_USER_REQ_NOT_INIT_MM_PROC_WHEN_ABNORMAL_T3212_RUNNING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_USER_REQ_NOT_INIT_GMM_PROC_WHEN_ABNORMAL_T3302_RUNNING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_EUTRAN_AFTER_NO_SUITABLE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_CSFB_PAGE_CSMT, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_TCM_QOS_SIG_IND_ENABLED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_REISSUE_REFRESH_WHEN_UE_IDLE_AFTER_CALL_END, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        //sbp_set_md_feature(SBP_SAT_REISSUE_REFRESH_AFTER_SMS_ACK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISCARD_MTSMS_WITH_SIM_DATA_DOWNLOAD_AND_DCS_NOT_0XF6, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_MMS_TIMER_BY_DEFAULT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_B17_IN_B12MFBI, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_WAIT_RRC_CONN_REL_FOR_SET_RAT_MODE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_IMSI_DETACH_WHEN_MM_CONN_ACTIVE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_PROC_FAIL_HANDLING, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_R13_DOS_ENHANCE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CHECK_MODEM_IVSR_TRIGGERED_WHEN_LU_ACCEPT, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_CHANGE_CELL_TYPE_SUITABLE_TO_ACCEPTABLE_IF_ECC_CALL_PENDING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_EMC_EST_CONNECTION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PRIORITIZE_HPLMN_IN_SHARED_NETWORK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE256QAM_UNDER_TEST_SIM, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CHECK_DL256QAM_PLMN_TABLE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_FDD_UL_CA, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SIM_UPDATE_RPM_VER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SIM_ALLOW_REFRESH_FCN_WHEN_ME_BUSY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_D4U5_FOR_TESTSIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);

        /*Features specific to Cricket Only*/
        if( sbp_id == 145)
        {
            sbp_set_md_feature(SBP_3G_CSG, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);  
            sbp_set_md_feature(SBP_DISABLE_4G_CSG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);  
        }
        /*Features specific to AT&T Only*/
        else if( sbp_id == 7)
        {
            /* <CDR-DSDS-100> for multi-SIM feature, GSMA TS.37 Illegal ME Handling */
            sbp_set_md_feature(SBP_BLOCK_ILLEGAL_ME, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
            sbp_set_md_feature(SBP_BLOCK_ILLEGAL_UE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);  
        }

    }
    else if (sbp_id == 8) //for T-Mobile
    {
		sbp_set_md_feature(SBP_EARLY_REPORT_PS_REG_STATUS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ATNT_HPPLMN_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_TMO_PLMN_MATCHING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_TMO_ECC_NOTIFICATION_ENABLE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_USE_SM_QOS_SUBSCRIBED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMR_REPORTING_WITH_SI2Q_BSIC_PARA, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_NOT_STAY_ON_FBLA_FOR_REG_PROV, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_NO_OPTIONAL_RAU_AFTER_CCO_FAILURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_GSMA_NETWORK_ACCESS_CONTROL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_TMO_IRAT_SET_ACTIVE_FLAG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_NWSEL_SEARCH_23G_LIMITED_SERVICE_FIRST, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_2G_DISABLED_WITH_ECC_ALLOWED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);

        /* If require TMO SML support, please unmask the following code */
        //sbp_set_md_feature(SBP_TMO_REMOTE_SIM_LOCK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);

        sbp_set_md_feature(SBP_AMR_WB_GSM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_AMR_WB_UMTS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_TMOUS_VOLTE_FT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LU_BEFORE_CSFB_ECC_IF_LAI_DIFF, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SET_FOLLOW_ON_REQUEST_FOR_IMS_PDP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_NOT_REPORT_IMS_UL_DATA_STATUS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_BEFORE_RINGING_CSFB, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_4G23_LOCAL_REL_IMS_PDN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_SKIP_LU_AFTER_CSFB_FOR_EAFR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_2G_CAP_FORCE_R9, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_IGNORE_INT_CHECK_FOR_NAS_MSG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMC_PDN_ACT_DISABLE_T3482, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_PROC_FAIL_HANDLING, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature_data(SBP_MODIFY_RLC_FOR_SACCH_DECODE, 6, (nvram_ef_sbp_modem_data_config_struct*)&sbp_data_buf);
        sbp_set_md_feature(SBP_FAST_HO_FOR_SPECIAL_SCENARIO, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE256QAM_UNDER_TEST_SIM, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CHECK_DL256QAM_PLMN_TABLE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_DISABLE_TM9, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_FDD_UL_CA, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_USE_IMSI_IN_EMERGENCY_ATTACH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_HPUE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EPS_ONLY_CAUSE18_SELECT23G, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_START_TD_TIMER_WITH_T3402_TIMER_VALUE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_D4U5_FOR_TESTSIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EPS_ONLY_CAUSE18_CSFB_NOT_PREFERRED_ABORT_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_REDUCE_T3311_TIMEOUT_FOR_RAU, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_ADD_TO_FTAI_WHEN_START_T3402, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature_data(SBP_POS_MODE_CAPABILITY_SWITCH, 1, (nvram_ef_sbp_modem_data_config_struct*)&sbp_data_buf);

    }
    else if (sbp_id == 9) // for CT
    {
        sbp_set_md_feature(SBP_OP09_SIM_LOCK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_2MIN_MINIMUM_HPPLMN_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PERMANENT_AUTO_SEL_MODE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_OP09_LTE_ROAMING, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_CHINATELECOM_CARDLOCK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_CHINATELECOM_EXTENSIONS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_MIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_CT_AUTO_REG_WHEN_MCC_CHANGED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DEACTIVATE_C2K_WHEN_UIM_ERROR, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_SCANNING_ENHANCEMENT_1XRTT_ACTIVE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_SCANNING_ENHANCEMENT_EVDO_ACTIVE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SESSION_NEGO_OPTM_POWERON, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EMM_DELAY_SEND_IMS_PDN_REQUEST, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 10) //for Tier2
    {
    }
    else if (sbp_id == 11) //for H3G
    {
        sbp_set_md_feature(SBP_PERMANENT_AUTO_SEL_MODE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_TRY_ABNORMAL_LAI_ONCE_MORE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_HPPLMN_1ST_ATTEMPT_ENHANCE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RPLMN_HPLMN_COMBINED_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_MM_SEARCH_HPLMN_BEFORE_RPLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_GMM_ATTACH_PDP_ACT_ON_SAME_RRC_CONN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_L4C_PS_SAVE_REG_SETTING_TO_NVRAM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 12) //for VzW
    {
		sbp_set_md_feature(SBP_RAC_NW_LOSS_OPTIMIZATION, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_NOTIFY_PLMN_BEFORE_READ_IMSI, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_IS_OP12, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_T3402_STOP_WHEN_MANUAL_SELECT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_T3402_POWER_ON_RESTART, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_T3346_POWER_ON_RESTART, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_BEARER_RSC_ALLOC, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_BEARER_RSC_MOD, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SESSION_CONGESTION_CONTROL_SUPPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SCC_T3396_REMAINS_WHEN_PLMN_CHANGE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_FEMTOCELL_SYSTEM_SELECTION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_MRU_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DYNAMIC_UE_SPECIFIC_DRX, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ACL_SUPPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ONE_APN_FOR_ONE_PDN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_THROTTLE_COUNTER_RESET_EXEMPTION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_FORCE_SET_PCO_IN_LTE_ATTACH_PDN_REQUEST, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_READ_PNN_ON_REFRESH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_REPORT_MBMS_IN_SERVICE_FOR_SIB15_ONLY_CELL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_HVOLTE_ENABLE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ATNT_HPPLMN_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_EUTRAN_AFTER_NO_SUITABLE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_NWSEL_SEARCH_23G_LIMITED_SERVICE_FIRST, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_MODEM_IVSR, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ALWAYS_TRIGGER_IVSR_AFTER_POWER_ON, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_IS_CONN_PAGING_LOCAL_REL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SYS_ENH_SYSTEM_SELECT_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        /*sbp_set_md_feature(SBP_STATUS_SYS_CSS_1X_MAPE_HOME_SYS_AVOID_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);*/
        sbp_set_md_feature(SBP_STATUS_SYS_CSS_1X_RESTRICT_SILENTRETRY_TO_SAME_GEO_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_MIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_MIP_DMU, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_DATA_ENHANCEMENT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_1X_PS_DELAY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_TDO, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SILENT_REDIAL_ON_SIB8, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_MEID_ME, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_OTA, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_SMS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_SMS_CMAS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_DO_APERSISTENCE_AVOID, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_C2KONLY_OOSA_RETRIEVE_OPTIMIZE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_HVOLTE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_TX_CLOSELOOP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_LTE_SIB8_TIMING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_DISABLE_EVDO_SUSPEND_TIMING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_SMS_BSP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_FEMTOCELL_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_LTE_MMO_SCAN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SID_MAPPING_MCC, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_LBS_DATA_LOGGING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SESSION_NEGO_OPTM_POWERON, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_VZW_REFRESH_PROCEED_DURING_THE_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_VZW_PSW_BYPASS_BAD_SECTOR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SO2_OPEN_GPS_EARLY, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_1XRTT_DISABLE_AHO_OPTIMIZE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_1XRTT_SYSTEM_LOST_SEARCH_FOR_UOI_SR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_1XRTT_ENHANCE_AEHO, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_1XRTT_ENHANCE_SILENT_RETRY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_IGNORE_TAC_ALL_ZEROS_CHECK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_VZW_REPORT_LTE_RS_SNR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_MM_SKIP_LU_AFTER_CSFB_FOR_EAFR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_RETRY_EMC_WHEN_ABNORMAL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_R13_DOS_ENHANCE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EMM_RETRY_EMC_IN_SAME_PLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_ZERO_POLICY_WAIT_FOR_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_DETACH_7_8_MAPPING_TO_REATTACH_REQUIRED, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EMM_PROC_FAIL_HANDLING, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_CONSERVATIVE_IPV4V6_FALLBACK_STRATEGY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);	
		sbp_set_md_feature(SBP_DISABLE_T3402_OPTIMIZATION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf); // Add due to SBP_IS_OP116 rename
        sbp_set_md_feature(SBP_OP12_C2K, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE256QAM_UNDER_TEST_SIM, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CHECK_DL256QAM_PLMN_TABLE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_NOTIFY_MBMSAL_E911_EVENT_USING_EMCS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_FDD_UL_CA, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_REFRESH_DATA_POLICY_VALID_ON_VOICE_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_VZW_INTERNATIONAL_ROAMING_REG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature_data(SBP_POS_VZW_MODE, 1, (nvram_ef_sbp_modem_data_config_struct*)&sbp_data_buf);
		sbp_set_md_feature(SBP_SEND_ALL_F_MCC_IN_PLMN_SEARCH_REQ_RATHER_THAN_C2K_MCC, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LBS_OTDOA_INTER_FREQ_MEAS, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_REISSUE_SIM_REFRESH_DURING_ECBM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 15) //for Telefonica
    {
        sbp_set_md_feature(SBP_DISABLE_DISPLAY_ROAMING_HPLMN_IN_EPLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_BLOCK_ILLEGAL_ME, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 16) //for EE
    {
        sbp_set_md_feature(SBP_PERMANENT_AUTO_SEL_MODE , KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_AUTO_RETURN_PRE_RPLMN , KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RAC_CHANGE_VDP_WHEN_IMS_ONOFF, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 17) //for DOCOMO
    {
        sbp_set_md_feature(SBP_DISABLE_BEARER_RSC_ALLOC, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_BEARER_RSC_MOD, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_R12_CHECK_SSAC_IN_CONNECTED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        //sbp_set_md_feature(SBP_RAC_CHANGE_VDP_IMS_CONFIG_BY_ROAMING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RAC_CHANGE_VDP_WHEN_IMS_ONOFF, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);

    #ifdef __VOLTE_SUPPORT__
        // Do not convert ATD to ATDE for ECC check result or it may cause empty emergency service category in CC SETUP
        sbp_set_md_feature(SBP_VDM_CONVERT_ATD_TO_ATDE_FOR_ECC_CHECK, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    #endif /* __VOLTE_SUPPORT__ */

        sbp_set_md_feature(SBP_DCM_ETWS_TEST_UE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RTP_FLOW_USE_CID_0, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_UNCOMP_CNTXT_USE_IR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EUTRAN_DISABLE_AND_EPS_DETACH_WHEN_DATA_IMS_OFF, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EPS_ONLY_CAUSE18_SELECT23G, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_LOCAL_DETACH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DOCOMO_IOT_CC, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DCM_RELAX_NON_IMS_BACKOFF_TIMER_CONSTRAINT_IF_MOBILE_DATA_CHANGE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_UL1D_CS_PROC_FOR_DOCOMO_EN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_ROLLBACK_TO_ABNORMAL_LTE_HPLMN_AFTER_NO_OTHER_SUITABLE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_DISABLE_ENH_CELLSEL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_RETRY_EMC_WHEN_ABNORMAL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EMM_RETRY_EMC_IN_SAME_PLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EMC_RETRY_CHK_IMS_EMERGENCY_SUPPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DO_EMERGENCY_ATTACH_WHEN_T3402_IS_RUNNING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_SELECT_23G_FOR_CSFB, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SERVICE_REJECT_ABNORMAL_E_LOCAL_RELEASE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_SEARCH_NORMAL_FOR_ECC_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_WAIT_RRC_CONN_REL_FOR_SET_RAT_MODE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_SET_MS_NW_CAPA_TO_DEFAULT_SIZE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENHANCE_PENDING_ECC_CALL_ON_PLMN_SEARCH, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
	#ifdef __ONE_BUTTON_CALL_REJECT__
		sbp_set_md_feature(SBP_ONE_BUTTON_CALL_REJECT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
	#endif /* __ONE_BUTTON_CALL_REJECT__ */
    }
    else if (sbp_id == 18) //for RJIL
    {
        sbp_set_md_feature(SBP_DISABLE_DISPLAY_ROAMING_HPLMN_IN_EPLMN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_IGNORE_TAC_ALL_ZEROS_CHECK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_MODEM_IVSR, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ALWAYS_TRIGGER_IVSR_AFTER_POWER_ON, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_DISABLE_ENH_CELLSEL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ROHC_COMPR_DECOMPR_TRACE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_REDUCE_MODEM_EM_REPORT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 19) //for Telstra
    {
    	  sbp_set_md_feature(SBP_TELSTRA_BAND_PRIORITY_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_EIA0_NOT_SUPPORTED_WHEN_NORMAL_ATTACH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_REPORT_MBMS_IN_SERVICE_FOR_SIB15_ONLY_CELL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 20) //for Sprint
    {
        sbp_set_md_feature(SBP_STATUS_VZW_LTE_SIB8_TIMING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_TCM_ENABLE_INACTIVITY_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_SPRINT_IMEI_LOCK_WITHOUT_SIM_RECOVERY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SPRINT_MD1_ROAMING_CONTROL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_BAND_SCAN_PRIORITY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_NO_COLDRESET_AFTER_CDMA_DETECT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        /*sbp_set_md_feature(SBP_STATUS_SYS_CSS_1X_MAPE_HOME_SYS_AVOID_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);*/
        sbp_set_md_feature(SBP_STATUS_MIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_MIP_DMU, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_DATA_ENHANCEMENT, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_OTA, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_QC_REDIRECT, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_TDO, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_1X_SYS_LOST, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_BSR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_CDG_BSR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_CDG_AVOIDANCE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_TRAFF_NEW_CH_NOT_LOGGING_MRU, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_PERSISTENCE_FAIL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_MO_SMS_BREAK_BSR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_SMS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_AT_CMD, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PRL_ENHANCE_FOR_INT_ROAM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CDG143_MAPE_SYS_AVOID_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_VOICE_ROAM_BARRING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_USE_RESTRICTIVE_SYSTEM_MATCH_FEATURE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ASSIGN_MRU0_IF_EMPTY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_SMS_DISABLE_SO_NEG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_SMS_CMAS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_TRAFF_NEW_CH_LOGGING_LAST_CHANNEL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_REPORT_SO, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        /*sbp_set_md_feature(SBP_STATUS_SPRINT_BSR_DATA_HOLD, FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);*/
        sbp_set_md_feature(SBP_BAR_DATA_ROAMING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PAGING_MONITOR_TIMEOUT_TO_GEOSCAN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_DO_IRAT_PRIORITY_DOWNGRADING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_CALL_RELEASE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_DO_PRL_LIST_ASSOCIATED_ONLY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_TRAFF_NEW_CH_LOGGING_LAST_CHANNEL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SESSION_NEGO_OPTM_POWERON, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_OPTM_WARM_RESET, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_C2KONLY_OOSA_RETRIEVE_OPTIMIZE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_VZW_TX_CLOSELOOP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_SCANNING_ENHANCEMENT_1XRTT_ACTIVE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_SCANNING_ENHANCEMENT_EVDO_ACTIVE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        /* Sprint tele-scope MPSR in idle, no need to run this feature, which will cause sprint irat case failure */
        //sbp_set_md_feature(SBP_LTE_SCANNING_ENHANCEMENT_1XRTT_EVDO_IDLE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_STATUS_SPRINT_DDTM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ATNT_HPPLMN_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_R13_DOS_ENHANCE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_HPUE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAT_OP20_PEND_REFRESH_WHEN_OTA, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EMM_PROC_FAIL_HANDLING, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_GMSS_SPRINT_HANDLING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_PERIODIC_CLEAR_FPLMN_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_C2L_HIGHER_PRIORITY_PLMN_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_STATUS_LBS_DATA_LOGGING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE256QAM_UNDER_TEST_SIM, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CHECK_DL256QAM_PLMN_TABLE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf); 
        sbp_set_md_feature(SBP_SAT_UICC_RESET_AFTER_REFRESH_FAILS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_D4U5_FOR_TESTSIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_FDD_UL_CA, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_CA_HPUE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_MAPPING_MCC_OTA_INVALID, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PREFER_HPLMN_IN_SHARED_NETWORK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_C2K_ECC_NOT_TO_SEND_ESR_FOR_SPECIFIC_OPERATOR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 50) //for Softbank
    {
        sbp_set_md_feature(SBP_LTE_DISABLE_BW, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature_data(SBP_EUTRAN_DISABLE_TIMER_VALUE, 54, (nvram_ef_sbp_modem_data_config_struct*)&sbp_data_buf);
        sbp_set_md_feature_data(SBP_EUTRAN_DISABLE_TD_TIMER_VALUE, 54, (nvram_ef_sbp_modem_data_config_struct*)&sbp_data_buf);
        sbp_set_md_feature(SBP_DISABLE_CS_DETACH_FOR_SET_MULTIRAT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RAC_CHANGE_USAGE_SETTING_BY_SIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_NWSEL_DO_NOT_SEARCH_NEXT_FOR_REJ_12, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DO_NOT_START_TD_DISABLE_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CS_AUTHENTICATION_REJECT_PS_UNAFFECTED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_FORCE_LU_FOR_SPECIAL_NW_EMM_DETACH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_WAIT_RRC_CONN_REL_FOR_SET_RAT_MODE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_AVOID_PS_DETACH_WHEN_EUTRAN_DISABLED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SM_DISABLE_PS_SIG_CONN_RETRY_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_USE_SM_QOS_SUBSCRIBED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ALLOW_REGISTRATION_FOR_PPAC_RESTRICTION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DO_NOT_CLEAR_CS_FPLMN_FOR_RAT_MODE_CHANGE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_LTE_B41, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_BEARER_RSC_ALLOC, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_BEARER_RSC_MOD, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_PLMN_SEL_WHEN_ACCESS_BARRED, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_EUTRAN_AFTER_NO_SUITABLE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SEARCH_4G_WHEN_FIRST_PS_ATTACH, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PREFER_SEARCH_3G, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_PREFER_SEARCH_4G, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_RAC_CHANGE_VDP_WHEN_IMS_ONOFF, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_BAND_SCAN_PRIORITY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_DISABLE_ENH_CELLSEL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_LOCAL_DETACH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_NO_ECC_RETRY_FOR_MM_CAUSE_101, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_HSPA_TO_LTE_FAST_RESEL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_IGNORE_2G_CB_DUP_CHECK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_IGNORE_3G_CB_DUP_CHECK, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
	#ifdef __ONE_BUTTON_CALL_REJECT__
		sbp_set_md_feature(SBP_ONE_BUTTON_CALL_REJECT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
	#endif /* __ONE_BUTTON_CALL_REJECT__ */
    }
    else if (sbp_id == 100) //for CSL
    {
    }
    else if (sbp_id == 101) //for PCCW
    {
        sbp_set_md_feature(SBP_INTERROGATE_GROUPS_OF_SS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 102) //for SMT
    {
    }
    else if (sbp_id == 103) //for SingTel
    {
    }
    else if (sbp_id == 104) //for StarHub
    {
    }
    else if(sbp_id == 105) //for AMX
    {
        sbp_set_md_feature(SBP_CLEAR_CODE_33, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 106) //for 3HK
    {
    }
    else if (sbp_id == 107) //for SFR
    {
        sbp_set_md_feature_data(SBP_3G_SIB_SKIP_ENABLE_FOR_ALL_PLMN, 1, (nvram_ef_sbp_modem_data_config_struct*) &sbp_data_buf);
    }
    else if (sbp_id == 108) //for TWN
    {
    }
    else if (sbp_id == 109) //for CHT
    {
    }
    else if (sbp_id == 110) //for FET
    {
    }
    else if(sbp_id == 112) //for Telcel
    {
#ifdef __VOLTE_SUPPORT__
        // Apply new CC33
        sbp_set_md_feature(SBP_CLEAR_CODE_33_29_NO_RETRY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
#else
        // Apply old CC33
        sbp_set_md_feature(SBP_CLEAR_CODE_33, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
#endif /* __VOLTE_SUPPORT__ */    
		sbp_set_md_feature(SBP_EARLY_REPORT_PS_REG_STATUS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 113) //for Beeline
    {
        sbp_set_md_feature(SBP_IGNORE_INT_CHECK_FOR_NAS_MSG, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_USE_MM_INTERNAL_T3212_PERIOD_SETTING, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 114) //for KT
    {
        sbp_set_md_feature(SBP_ATT_REJ_19_MAXIMUM_3, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature_data(SBP_LTE_CONN_RACH_FAIL, 2, (nvram_ef_sbp_modem_data_config_struct*) &sbp_data_buf);
        sbp_set_md_feature(SBP_DO_NOT_START_TD_DISABLE_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ERRC_HO_SIB_READ_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_SEC_SKIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SMS_SETTINGS_FOR_KT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SEND_NW_REG_REJ_CAUSE_IND, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_KT_ENABLE_TRANSFER_SS_STATUS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_KOR_CHANNEL_PRIORITY_STORED_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_KOR_CUSTOMIZATION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_UL1D_CS_TRIGGER_EXTEND_RLF_EN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 115) //for SKT
    {
        sbp_set_md_feature_data(SBP_LTE_CONN_RACH_FAIL, 3, (nvram_ef_sbp_modem_data_config_struct*) &sbp_data_buf);
        sbp_set_md_feature(SBP_DO_NOT_START_TD_DISABLE_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_SEC_SKIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ALLOW_FAST_DORMANCY_DURING_VOICE_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ENABLE_HNB_NAME_URC, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_CS_CALL_PROTECTION_FROM_PS_PAGING, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*) &sbp_feature_buf);
        sbp_set_md_feature(SBP_RAU_DELAY_FOR_CSFB, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*) &sbp_feature_buf);
        sbp_set_md_feature(SBP_RRC_CONN_REL_CAUSE_IND, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*) &sbp_feature_buf);
        sbp_set_md_feature(SBP_UPDATE_SIB19_INFO, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*) &sbp_feature_buf);
        sbp_set_md_feature(SBP_SMS_SETTINGS_FOR_SKT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SEND_NW_REG_REJ_CAUSE_IND, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_KOR_CHANNEL_PRIORITY_STORED_SEARCH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_KOR_CUSTOMIZATION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_UL1D_CS_TRIGGER_EXTEND_RLF_EN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 116) //for Uplus
    {
        sbp_set_md_feature(SBP_RAC_CLEAR_CAUSE18_WHEN_DETACH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_ATTACH_REJ_19_START_T3402, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature_data(SBP_LTE_CONN_RACH_FAIL, 4, (nvram_ef_sbp_modem_data_config_struct*) &sbp_data_buf);
        sbp_set_md_feature(SBP_DO_NOT_START_TD_DISABLE_TIMER, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SAVE_T3402_IN_NVRAM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_LTE_SEC_SKIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SMS_SETTINGS_FOR_LGU, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature_data(SBP_SMS_MAX_TL_RETRY, 0, (nvram_ef_sbp_modem_data_config_struct*) &sbp_data_buf);
        sbp_set_md_feature(SBP_SEND_NW_REG_REJ_CAUSE_IND, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_DISABLE_T3402_OPTIMIZATION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf); // Add due to SBP_IS_OP116 rename
        sbp_set_md_feature(SBP_KOR_CUSTOMIZATION, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_UL1D_CS_TRIGGER_EXTEND_RLF_EN, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature_data(SBP_SMS_MAX_TL_RETRY, 0, (nvram_ef_sbp_modem_data_config_struct*) &sbp_data_buf);
        sbp_set_md_feature(SBP_FLIGHT_MODE_RESET_T3402, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 117) //for Smartfren
    {
    }
    else if (sbp_id == 118) //for YTL
    {
    }
    else if(sbp_id == 119) //for Natcom
    {
    }
    else if(sbp_id == 120) //for Claro
    {
        sbp_set_md_feature(SBP_NO_CHANGERAT_RETRY_FOR_EMERGENCY_CALL_REJECT, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EARLY_REPORT_PS_REG_STATUS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 121) //for Bell
    {
    }
    else if(sbp_id == 122) //for AIS
    {
    }
    else if(sbp_id == 124) //for APTG
    {
    }
    else if(sbp_id == 125) //for DTAC
    {
    }
    else if (sbp_id == 126) //for Turkey Avea
    {
    }
    else if (sbp_id == 127) //for MEGAFON
    {
    }
    else if (sbp_id == 128) //for DNA Finland
    {

    }
    else if (sbp_id == 129) //for KDDI
    {
        sbp_set_md_feature(SBP_IMS_REG_ONGOING_SELECT_MMTEL_VOICE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_LOCAL_DETACH, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_SET_RAT_TO_LTE_ONLY_FOR_LTE_ONLY_NW, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if (sbp_id == 130) //for TIM Italy
    {

    }
    else if(sbp_id == 131) //for TrueMove
    {
    }
    else if(sbp_id == 132) //for Movistar
    {
        sbp_set_md_feature(SBP_EMM_IGNORE_MT_CS_WHEN_IMS_CALL, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 133) //for DU
    {
    }
    else if(sbp_id == 140) //for MTN
    {
        sbp_set_md_feature(SBP_PREFER_3G_IN_23G_MODE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_IMSI_GPRS_DETACH_RETRY, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 147) //for Airtel
    {
	    sbp_set_md_feature(SBP_PAM_OP147_BACKOFF_TIMER_DEFAULT_VALUE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
	else if(sbp_id == 191) //for Grameenphone Bangladesh
	{
	    sbp_set_md_feature(SBP_EARLY_REPORT_PS_REG_STATUS, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
	}
	else if(sbp_id == 236) //for USCC
	{
        sbp_set_md_feature(SBP_STATUS_MIP, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_USCC_EMC_FLOW_DIAL_1X, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_EXSR_REJ_FOR_C2K_NO_TAU, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);   
        sbp_set_md_feature(SBP_STATUS_HVOLTE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
        sbp_set_md_feature(SBP_C2K_ECC_NOT_TO_SEND_ESR_FOR_SPECIFIC_OPERATOR, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		//ALPS04983420 NVIOT TC 7.2.3.2.61
		sbp_set_md_feature(SBP_R13_DOS_ENHANCE, KAL_FALSE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
	}
	else if(sbp_id == 276) //for Altice USA
    {
        sbp_set_md_feature(SBP_SEARCH_NEXT_WHEN_VPLMN_VOPS_NOT_SUPPORT_UE_IN_LTE_ONLY_MODE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
		sbp_set_md_feature(SBP_CHANGE_RAT_TO_LTE_ONLY_FOR_CUSTOM_IMSI, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
			    // enable HPUE
        sbp_set_md_feature(SBP_HPUE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    	sbp_set_md_feature(SBP_CA_HPUE, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);

         // enable D4U
	    sbp_set_md_feature(SBP_ENABLE_D4U5_FOR_TESTSIM, KAL_TRUE, (nvram_ef_sbp_modem_config_struct*)&sbp_feature_buf);
    }
    else if(sbp_id == 1001) //for Ericsson IMS IWLAN
    {
    }
    else if(sbp_id == 1002) //for Nokia Finland collaboration testing
    {
    }
    else if(sbp_id == 1003) //for HQLAB_ERICSSON
    {
    }
    else if(sbp_id == 1004) //for Huawei IMS
    {
    }


    /* retrieve the current SBP NV if SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP */
    if (KAL_TRUE == param_ptr->is_in_dynamic_sbp)
    {
        nvram_ef_sbp_modem_config_struct nv_sbp_feature_buf;
        nvram_ef_sbp_modem_data_config_struct nv_sbp_data_buf;

        kal_uint32 i = 0;
        kal_uint8 data = 0;

        /* Read current settings */
        sbp_get_sbp_feature_raw_config(param_ptr->ps_id, nv_sbp_feature_buf.modem_sbp_config);

        for (i = 0 ; i < SBP_MAX_MD_FEATURE ; i++)
        {
            if ((sbp_feature_attr_table[i] & SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP) == SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP)
            {
                data = sbp_query_md_feature_by_nvram(i, &nv_sbp_feature_buf);

                sbp_set_md_feature(i ,data, &sbp_feature_buf);
            }
        }
        // Write settings back to contexts
        sbp_set_sbp_feature_raw_config(param_ptr->ps_id, sbp_feature_buf.modem_sbp_config);


        /* Read current settings */
        sbp_get_sbp_data_raw_config(param_ptr->ps_id, nv_sbp_data_buf.modem_sbp_data_config);
        for (i = 0 ; i < SBP_DATA_MAX_MD_FEATURE ; i++)
        {
            if ((sbp_data_attr_table[i] & SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP) == SBP_ATTR_NOT_SUPPORT_DYNAMIC_SBP)
            {
                data = sbp_query_md_feature_data_by_nvram(i, &nv_sbp_data_buf);

                sbp_set_md_feature_data(i, data, &sbp_data_buf);
            }
            
        }
        // Write settings back to contexts
        sbp_set_sbp_data_raw_config(param_ptr->ps_id, sbp_data_buf.modem_sbp_data_config);
        
    }
    else
    {
        protocol_id_enum ps_id;

        // sbp_reload_config, write setting back to context for all ps_id
        for (ps_id = PROTOCOL_1; ps_id < MAX_SIM_NUM; ps_id++)
        {
            sbp_set_sbp_feature_raw_config(ps_id, sbp_feature_buf.modem_sbp_config);
            sbp_set_sbp_data_raw_config(ps_id, sbp_data_buf.modem_sbp_data_config);
        }
    }

    // overwrite with custom config NV
    sbp_set_custom_config_from_nv(param_ptr->ps_id, sbp_id, param_ptr);

    return KAL_TRUE;
}

/*****************************************************************************
 * FUNCTION
 *  custom_nvram_set_sbp_from_imsi_mcc_mnc
 * DESCRIPTION
 * Set SBP features and data according imsi mcc/mnc in OM load
 * PARAMETERS
 *  imsi  [IN]
 *  simInterface [IN]
 * RETURNS
 *   void
 *****************************************************************************/
void custom_nvram_set_sbp_from_imsi_mcc_mnc(kal_uint8 *imsi, kal_uint8 simInterface)
{
    kal_uint8 mcc1;
    kal_uint8 mcc2;
    kal_uint8 mcc3;
    kal_uint8 mnc1;
    kal_uint8 mnc2;
    kal_uint8 mnc3;

    /* derive MCC/MNC */
    mcc1 = (imsi[1] >> 4);
    mcc2 = (imsi[2] & 0x0f);
    mcc3 = (imsi[2] >> 4);
    mnc1 = (imsi[3] & 0x0f);
    mnc2 = (imsi[3] >> 4);
    mnc3 = (imsi[4] & 0x0f);

//#if defined(__PCORE__)
    if(simInterface == SIM1 && sbp_query_id() == 0)//OM load
    {
        /* reliance Jio */
        /* PLMN 405- 840, 410-854...859, 410-860...869, 410-870...874 */
        if (mcc1 == 0x04 && mcc2 == 0x00 && mcc3 == 0x05)
        {
            if((mnc1 == 0x08 && mnc2 == 0x04 && mnc3 == 0x00) ||
                    (mnc1 == 0x08 && mnc2 == 0x05 && (mnc3 >= 0x04 && mnc3 <= 0x09)) ||
                    (mnc1 == 0x08 && mnc2 == 0x06 && (mnc3 >= 0x00 && mnc3 <= 0x09)) ||
                    (mnc1 == 0x08 && mnc2 == 0x07 && (mnc3 >= 0x00 && mnc3 <= 0x04)))
            {
                /* TBD: remove this code with a different solution. It works but not a good solution to change the SBP feature after initialization as per SBP design*/
                sbp_general_set_md_feature(SBP_DISABLE_DISPLAY_ROAMING_HPLMN_IN_EPLMN, KAL_TRUE);
                sbp_general_set_md_feature(SBP_SCA_CONFIGURED_BY_CUSTOMER, KAL_TRUE);
                sbp_general_set_md_feature(SBP_CONVERT_ATTACH_REJECT_FROM_CAUSE_7_TO_14, KAL_TRUE);
            }
        }
        /* place setting of other PLMNs here */
    }
//#endif
}

kal_bool nvram_custom_config_sbp_by_model_id(kal_uint32 md_product_model_id)
{
    switch(md_product_model_id)
    {
        case 1: // model XXX
            //sbp_general_set_md_feature(SBP_EMM_CONN_FAIL_ABNORMAL_B, KAL_TRUE);
            break;
        default:
            break;
    }

    return KAL_TRUE;
}
